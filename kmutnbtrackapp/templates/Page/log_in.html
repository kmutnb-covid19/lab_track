{% extends 'Page/page_base.html' %}
{% load static %}

{% block title%}Login{% endblock %}
{% block style %}
<link rel="stylesheet" type="text/css" href="{% static '/css/log_in.css'%}">
{% endblock %}

{% block script %}
<script type="text/javascript" src="{% static '/js/log_in.js' %}"></script>
<script type="text/javascript">
    function Click_Sign_in_with_google() {
        location.href="{% url 'social:begin' 'google-oauth2' %}?next={{ lab_hash }}";
    }
</script>
{% endblock %}

{% block content %}
<!-- navbar LabTrack -->
<nav class="navbar navbar-dark" style="background-color: #355C7D;">
    <a class="navbar-brand" href="#">
        <img src="{% static 'images/logo.png' %}" width="40" height="auto" class="d-inline-block align-top" alt="" loading="lazy">
        {{ lab_name }}
    </a>
</nav>

<!-- log in form -->
<div class="container">
    <div class="row">
        <div class="col-md-5 mx-auto">
        <div id="first">
            <div class="myform form ">
                <div class="logo mb-3">
                    <div class="col-md-12 text-center">
                        <h1>Login</h1>
                    </div>
                </div>
                {% if wrong %}
                <div class="col-md-12 text-center">
                        <p style="color:red">Username หรือ Password ผิด กรุณาลองใหม่อีกครั้ง</p>
                </div>
                {% endif %}
                <form action="{% url 'kmutnbtrackapp:login' %}?next={{ lab_hash }}" method="post" name="login">
                    {% csrf_token %}
                    <input value="{{lab_hash}}" name="next" hidden>
                    <div class="form-group">
                        <label for="exampleInputEmail1">Username</label>
                        <input type="text" name="username" required  class="form-control" id="username" aria-describedby="emailHelp" placeholder="Enter Username">
                    </div>
                    <div class="form-group">
                        <label for="exampleInputEmail1">Password</label>
                        <input type="password" name="password" required id="password" class="form-control" aria-describedby="emailHelp" placeholder="Enter Password">
                    </div>
                    <div class="col-md-12 text-center ">
                        <button type="submit" class="btn btn-block mybtn btn-primary tx-tfm">Login</button>
                    </div>
                    <div class="col-md-12 ">
                        <div class="login-or">
                            <hr class="hr-or">
                            <span class="span-or">or</span>
                        </div>
                    </div>
                    <div class="col-md-12 mb-3">
                        <p class="text-center" style="color:#FFFFFF";>
                            <a onclick="Click_Sign_in_with_google()" class="google btn mybtn">
                                <img id="google_img" src="{% static 'images/google.png' %}" alt="google_pic">
                                Sign in with KMUTNB account
                            </a>
                        </p>

                    </div>
                    <div class="form-group">
                        <p class="text-center">Don't have account? <a href="{% url 'kmutnbtrackapp:signup' %}?next={{ lab_hash }}" id="signup">Sign up here</a></p>
                        <p class="text-center">Forgot password? <a href="{% url 'password_reset' %}?next={{ lab_hash }}" id="signup">Reset password here</a></p>
                    </div>
                </form> 
            </div>
        </div>
        </div>
    </div>
</div>   
{% endblock %}